<app-header></app-header>
<section id="secondary-header">
  <div class="container d-flex align-items-center gap-2">
    <a href="" class="primary-link fw-bold">Home</a>
    <span>/</span>
    <span>Agreement type master</span>
  </div>
</section>
<section id="page-content">
  <div class="container">
    <form action="">
      <div
        class="row"
        style="
          background-color: rgba(226, 242, 246, 1);
          padding: 5%;
          margin-bottom: 0.5cm;
        "
      >
        <div class="col-md-6">
          <div class="d-flex align-items-center w-100 py-2">
            <div class="name">
              Agreement Type<span class="text-danger">*</span>
            </div>
            <div class="ms-3 d-flex-2">
              <input
                type="hidden"
                name="aggreTypeId"
                id="aggreTypeId"
                [(ngModel)]="aggreTypeId"
              />
              <input
                type="text"
                name="aggrementType"
                id="aggrementType"
                [(ngModel)]="aggrementType"
                class="form-control box"
                (input)="vldChkLst.keyPressAlphanumeric($event)"
                maxlength="100"
              />
              <div class="text-danger">{{ errorMessages.aggrementType }}</div>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="d-flex align-items-center w-100 py-2">
            <div class="name">Start Date<span class="text-danger">*</span></div>
            <div class="ms-3 d-flex-2">
              <input
                type="date"
                class="form-control box"
                name="filter_sdate"
                id="filter_date"
                [(ngModel)]="aggreStDate"
                (input)="updateMinEndDate()"
              />
              <div class="text-danger">{{ errorMessages.aggreStDate }}</div>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="d-flex align-items-center w-100 py-2">
            <div class="name">End Date<span class="text-danger">*</span></div>
            <div class="ms-3 flex-1">
              <input
                type="date"
                class="form-control box"
                name="filter_edate"
                id="filter_date"
                [(ngModel)]="aggreEdDate"
                [min]="aggreStDate"
              />
              <div class="text-danger">{{ errorMessages.aggreEdDate }}</div>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="d-flex align-items-center w-100 py-2">
            <div class="name">Description</div>
            <div class="ms-3 d-flex-1">
              <!-- <input type="text" name="aggrementTypeDesc" id="aggrementTypeDesc" class="form-control box"
                                [(ngModel)]="aggrementTypeDesc"> -->
              <textarea
                name="aggrementTypeDesc"
                id="aggrementTypeDesc"
                class="form-control"
                [(ngModel)]="aggrementTypeDesc"
                rows="4"
                cols="50"
              >
              </textarea>
              <div class="text-danger">{{ errorMessages.description }}</div>
            </div>
          </div>
        </div>
      </div>

      <div class="mt-4 d-flex justify-content-end">
        <button
          class="btn btn-primary form-save-btn"
          (click)="saveAgreementType()"
          *ngIf="aggreTypeId == ''"
        >
          Save
        </button>
        <button
          class="btn btn-primary px-4"
          (click)="updateAgreementType()"
          *ngIf="aggreTypeId !== ''"
        >
          Update
        </button>
        <button
          class="btn mx-1 btn-danger px-4"
          (click)="cancelUpdateAgreement()"
          *ngIf="aggreTypeId !== ''"
        >
          Cancel
        </button>
      </div>
    </form>
    <div class="" style="margin-top: 30px">
      
      <div
        class=""
        style="
          position: relative;
          overflow-x: auto;
          overflow-y: auto;
          margin-top: 10px;
        "
      >
     <p-table
  [value]="tableData"
  class="table w-full table-bordered table-striped"
  id="maintable"
  [paginator]="true"
  [rows]="5"
  [showCurrentPageReport]="true"
  currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
  [globalFilterFields]="['ownerName', 'phoneNo', 'address1', 'idProof']"
  #dt
  selectionMode="multiple"
  [(selection)]="selectedProducts"
  [exportHeader]="'customExportHeader'"
>

<ng-template pTemplate="caption">
  <div class="d-flex align-items-center justify-content-between">
    <div class="d-flex">
      <div class="mx-2">
        <button
          class="btn btn-primary px-3 py-2"
          style="font-size: 13px"
          (click)="exportPdf()"
        >
        Export To pdf
      </button>
    </div>
    <div class="">
      <button
        class="btn btn-primary px-3 py-2"
        style="font-size: 13px"
        (click)="exportExcel()"
      >
        Export To Excel
      </button>
    </div>
  </div>
  <div style="display: flex">
    <input
      type="text"
      class="form-control"
      pInputText
      placeholder="Search"
      (input)="
        dt.filterGlobal($any($event.target).value, 'contains')
      "
      style="margin-right: 8px"
    />
    <div
      style="
        display: flex;
        align-items: center;
        padding: 0.375rem 0.75rem;
        font-size: 1rem;
        line-height: 1.5;
        color: #495057;
        background-color: #e9ecef;
        border: 1px solid #ced4da;
        border-radius: 0.25rem;
      "
    >
      <i class="fa fa-search"></i>
    </div>
  </div>
</div>
</ng-template>
<ng-template pTemplate="header" class="">
    <tr>
      <th style="background-color: rgba(0, 133, 159, 1); color: #faf7f7">
        SL.NO
      </th>
      <th style="background-color: rgba(0, 133, 159, 1); color: #faf7f7">
        Agreement Type
      </th>
      <th style="background-color: rgba(0, 133, 159, 1); color: #faf7f7">
        Description
      </th>
      <th style="background-color: rgba(0, 133, 159, 1); color: #faf7f7">
        Start Date
      </th>
      <th style="background-color: rgba(0, 133, 159, 1); color: #faf7f7">
        End Date
      </th>
      <th style="background-color: rgba(0, 133, 159, 1); color: #faf7f7">
        Created Date
      </th>
      <th style="background-color: rgba(0, 133, 159, 1); color: #faf7f7">
        Action
      </th>
    </tr>

</ng-template>
<ng-template pTemplate="body" let-item let-i="rowIndex">
 
    <tr>
      <td>{{ i + 1 }}</td>
      <td>{{ item.aggreTypeName }}</td>
      <td>{{ item.description }}</td>
      <td>{{ item.aggreStDate | date : "dd/MM/yyyy" }}</td>
      <td>{{ item.aggreEdDate | date : "dd/MM/yyyy" }}</td>
      <td>{{ item.createdDate | date : "dd/MM/yyyy" }}</td>
      <td>
        <div style="display: inline-flex">
          <button
            class="btn btn-sm mx-2"
            (click)="
              editAgreementType(
                item.aggreTypeId,
                item.aggreTypeName,
                item.aggreStDate,
                item.description,
                item.aggreEdDate
              )
            "
            style="background-color: rgb(22, 133, 236); color: #faf7f7"
          >
            <i class="fa fa-edit"></i>
          </button>
          <button
            class="btn btn-danger btn-sm mx-2"
            (click)="deleteAgreementType(item.aggreTypeId)"
          >
            <i class="fa fa-trash-alt"></i>
          </button>
        </div>
      </td>
    </tr>
  </ng-template>
</p-table>

      </div>
    </div>
    <br />
    <div class="d-flex justify-content-end">
      <pagination-controls
        previousLabel="Prev"
        nextLabel="Next"
        (pageChange)="onTableDataChange($event)"
      >
      </pagination-controls>
    </div>
  </div>
</section>
<app-footer></app-footer>
